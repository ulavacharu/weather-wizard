const _=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function l(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerpolicy&&(o.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?o.credentials="include":e.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(e){if(e.ep)return;e.ep=!0;const o=l(e);fetch(e.href,o)}};_();let s,w,p,m,i=document.getElementById("display-error");function q(){i.style.visibility="hidden",s=document.getElementById("user-location").value,h()}function O(t){i.style.visibility="hidden",s=t,h()}async function h(){try{const r=`/api/forward?access_key=${{}.pos_stack_key}&query=${s}`,n=await(await fetch(r)).json();console.log(n),s=n.data[0].name,w=` , ${n.data[0].region_code}, ${n.data[0].country_code}`,m=n.data[0].longitude,p=n.data[0].latitude,B()}catch(t){i.style.visibility="visible",i.innerText="Error Occured while fetching geo Location & Error is "+t}}async function B(){try{let t={}.open_key;const l=await(await fetch(`https://api.openweathermap.org/data/2.5/weather?units=metric&lat=${p}&lon=${m}&appid=${t}`)).json();$("html, body").animate({scrollTop:0},"fast"),D(l)}catch(t){i.style.visibility="visible",i.innerText="Error Occured while fetching Current weather data & Error is "+t}}let b=document.querySelector("#result-city"),M=document.querySelector("#result-ext-city"),x=document.querySelector("#result-temp"),v=document.querySelector("#result-desc"),d=document.querySelector("#result-icon"),C=document.querySelector("#result-humid"),E=document.querySelector("#result-wind");const D=t=>{b.innerText=s,M.innerText=w,x.innerText=t.main.temp,v.innerText=t.weather[0].description,d.classList.add("final-icon"),d.src=`https://openweathermap.org/img/wn/${t.weather[0].icon}.png`,C.innerText=t.main.humidity,E.innerText=t.wind.speed,F()};let f={},k,y,T;async function F(){try{let r=`https://api.openweathermap.org/data/2.5/onecall?units=metric&exclude=hourly,minutely,current&lat=${p}&lon=${m}&appid=857c0aa283617b6512bc96195a81d783`;f=await(await fetch(r)).json();let n=f.daily.map(e=>e);k=n.map(e=>e.temp.max),y=n.map(e=>e.wind_speed),y=n.map(e=>e.wind_speed),T=n.map(e=>e.humidity)}catch(t){i.style.visibility="visible",i.innerText="Error Occured while fetching weekly data & Error is "+t}}const j=[" Jan"," Feb"," Mar"," Apr"," May"," Jun"," Jul"," Aug"," Sept"," Oct"," Nov"," Dec"],I=new Date;let a=I.getDate(),c=j[I.getMonth()],g=document.getElementById("chart"),L=document.getElementById("chart").getContext("2d");function S(){if(s){g.style.display="block",g.style.backgroundColor="white";let t,r={type:"line",data:{labels:[a+c,a+1+c,a+2+c,a+3+c,a+4+c,a+5+c,a+6+c],datasets:[{label:"Max Temparature",data:k,backgroundColor:"lightblue",borderColor:"royalblue",tension:.3},{label:"Wind Speeds",data:y,backgroundColor:"lightpink",borderColor:"hotpink",tension:.3},{label:"Humidity",data:T,backgroundColor:"powderblue",borderColor:"lightseagreen ",tension:.3}]},options:{responsive:!0,plugins:{title:{display:!0,text:`Weather Forecast in ${s}`,font:{size:18}}},legend:{display:!0,position:"bottom"},animation:{onComplete:()=>{t=!0},delay:l=>{let n=0;return l.type==="data"&&l.mode==="default"&&!t&&(n=l.dataIndex*300+l.datasetIndex*100),n}},bezierCurve:!0,scales:{y:{beginAtZero:!0}}}};new Chart(L,r)}else i.style.visibility="visible",i.innerText="Invalid Location",i.scrollIntoView({behavior:"auto",block:"center",inline:"center"})}function A(){let t=Chart.getChart("chart");t!=null&&t.destroy(),L=document.getElementById("chart").getContext("2d"),S()}function N(){document.querySelector("#user-location").value="",b.innerText="-----",x.innerText="--",v.innerText="-----",d.classList.remove("final-icon"),document.getElementById("result-ext-city").innerText=null,d.src="#",C.innerText="--",E.innerText="--",i.visibility="hidden"}window.positionFunc=h;window.customLoc=O;window.updateChart=A;window.callChart=S;window.getLoc=q;window.clearEverything=N;
